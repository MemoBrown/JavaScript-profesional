{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.js","assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","player","play","pause","muted","value","forEach","plugin","run","unmuted","toggleMuted","AutoPlay","AutoPause","threshold","handleIntersection","bind","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","entries","entry","isVisible","intersectionRatio","visibilityState","video","querySelector","getElementById","mute","onclick","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":"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","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["function MediaPlayer(config) {\n    this.media = config.el\n    this.plugins = config.plugins || [];\n\n    this._initPlugins();\n  }\n\n  MediaPlayer.prototype._initPlugins = function(){\n    const player = {\n      play: () => this.play(),\n      pause: () => this.pause(),\n      media: this.media,\n      get muted(){\n        return this.media.muted;\n      },\n\n      set muted(value){\n        this.media.muted = value;\n      },\n    };\n\n    this.plugins.forEach(plugin => {\n      plugin.run(player);\n    });\n  };\n  \n  MediaPlayer.prototype.play = function(){\n    this.media.play();\n  }\n  MediaPlayer.prototype.pause = function(){\n    this.media.pause();\n  }\n  MediaPlayer.prototype.muted = function(){\n    this.media.muted = true;\n  }\n  MediaPlayer.prototype.unmuted = function(){\n    this.media.muted = false;\n  }\n  MediaPlayer.prototype.toggleMuted = function() {\n    if (this.media.muted) {\n      this.unmuted();\n    } else {\n      this.muted();\n    }\n  \n  }\n\n  export default MediaPlayer","function AutoPlay() {}\nAutoPlay.prototype.run = function(player){\n    if(!player.muted){\n        player.muted = true;\n    }\n    player.play();\n};\n\nexport default AutoPlay;","class AutoPause {\r\n    constructor() {\r\n      this.threshold = 0.25;\r\n      this.handleIntersection = this.handleIntersection.bind(this);\r\n      this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\r\n    }\r\n  \r\n    run(player) {\r\n      this.player = player;\r\n  \r\n      const observer = new IntersectionObserver(this.handleIntersection, {\r\n        threshold: this.threshold,\r\n      });\r\n  \r\n      observer.observe(this.player.media);\r\n\r\n      document.addEventListener(\"visibilitychange\", this.handleVisibilityChange)\r\n    }\r\n  \r\n    handleIntersection(entries) {\r\n      const entry = entries[0];\r\n  \r\n      const isVisible = entry.intersectionRatio >= this.threshold;\r\n  \r\n      if (isVisible) {\r\n        this.player.play();\r\n      } else {\r\n        this.player.pause();\r\n      }\r\n    }\r\n\r\n    handleVisibilityChange(){\r\n      const isVisible = document.visibilityState === \"visible\";\r\n      if (isVisible){\r\n        this.player.play()\r\n      } else{\r\n        this.player.pause()\r\n      }\r\n    }\r\n  }\r\n  \r\n  export default AutoPause;\r\n  ","import MediaPlayer from './MediaPlayer.js'\nimport AutoPlay from './plugins/AutoPlay.js'\nimport AutoPause from './plugins/AutoPause.js'\n\nconst video = document.querySelector(\"video\");\nconst play = document.getElementById(\"btn-play\");\nconst pause = document.getElementById(\"btn-pause\");\nconst mute =document.getElementById(\"btn-mute\");\n\nconst player = new MediaPlayer({ \n    el: video, \n    plugins: [new AutoPlay(), new AutoPause()], \n});\n\n\nplay.onclick = () => player.play();\npause.onclick = () => player.pause();\nmute.onclick = () => player.toggleMuted();\n\nif ('serviceWorker' in navigator){\n    navigator.serviceWorker.register('/sw.js').catch(error => {\n        console.log(error.message);\n    });\n}"]}